<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Registro</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>

<body class="bg-light">

<div class="container mt-5">
    <div class="col-md-6 offset-md-3">
        <div class="card shadow">
            <div class="card-header text-center">
                <h3>Registro de Usuario</h3>
            </div>

            <div class="card-body">
                <form th:action="@{/registro}" th:object="${usuario}" method="post">

                    <!-- USERNAME -->
                    <div class="mb-3">
                        <label>Username</label>
                        <input type="text" class="form-control" th:field="*{username}" required>
                    </div>

                    <!-- EMAIL -->
                    <div class="mb-3">
                        <label>Email</label>
                        <input type="email" class="form-control" th:field="*{email}" required>
                    </div>

                    <!-- PASSWORD -->
                    <div class="mb-3">
                        <label>Password</label>
                        <input type="password" class="form-control" th:field="*{password}" required>
                    </div>

                    <!-- ROL -->
                    <div class="mb-3">
                        <label>Rol</label>
                        <select class="form-select" th:field="*{rol}" id="rolSelect" required>
                            <option value="">Seleccione...</option>
                            <option value="EMPLEADO">Empleado</option>
                            <option value="ADMIN">Instructor (Admin)</option>
                        </select>
                    </div>

                    <!-- CAMPOS EMPLEADO -->
                    <div id="empleadoFields" class="d-none">
                        <h5 class="mt-3">Datos Empleado</h5>

                        <div class="mb-3">
                            <label>Nombre</label>
                            <input type="text" class="form-control" th:field="*{empleado.nombre}">
                        </div>

                        <div class="mb-3">
                            <label>Apellido</label>
                            <input type="text" class="form-control" th:field="*{empleado.apellido}">
                        </div>

                        <div class="mb-3">
                            <label>√Årea</label>
                            <input type="text" class="form-control" th:field="*{empleado.area}">
                        </div>
                    </div>

                    <!-- CAMPOS INSTRUCTOR -->
                    <div id="instructorFields" class="d-none">
                        <h5 class="mt-3">Datos Instructor</h5>

                        <div class="mb-3">
                            <label>Nombre</label>
                            <input type="text" class="form-control" th:field="*{instructor.nombre}">
                        </div>

                        <div class="mb-3">
                            <label>Apellido</label>
                            <input type="text" class="form-control" th:field="*{instructor.apellido}">
                        </div>

                        <div class="mb-3">
                            <label>Especialidad</label>
                            <input type="text" class="form-control" th:field="*{instructor.especialidad}">
                        </div>
                    </div>

                    <button class="btn btn-primary w-100 mt-3" type="submit">Registrar</button>

                </form>
                <div th:if="${errorMessage}" class="mt-5 alert alert-danger" th:text="${errorMessage}"></div>
            </div>
        </div>
    </div>
</div>

<script>
    const rolSelect = document.getElementById("rolSelect");
    const empleadoFields = document.getElementById("empleadoFields");
    const instructorFields = document.getElementById("instructorFields");

    rolSelect.addEventListener("change", function() {
        const rol = this.value;

        empleadoFields.classList.add("d-none");
        instructorFields.classList.add("d-none");

        if (rol === "EMPLEADO") {
            empleadoFields.classList.remove("d-none");
        } else if (rol === "ADMIN") {
            instructorFields.classList.remove("d-none");
        }
    });
</script>

</body>
</html>
